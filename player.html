<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Просмотр аниме - Re:Voice</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Навигация -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand" onclick="window.location.href='index.html'">
                <i class="fas fa-play-circle"></i>
                <span class="brand-text">Re:Voice</span>
                <span class="brand-sub">Anime</span>
            </div>
            
            <button class="back-btn" onclick="window.location.href='index.html'">
                <i class="fas fa-arrow-left"></i> Назад
            </button>
        </div>
    </nav>

    <!-- Плеер и информация -->
    <main class="player-container">
        <div class="player-wrapper">
            <!-- Плеер Kodik -->
            <div class="player-section">
                <div class="player-header">
                    <h2 id="playerTitle">Загрузка...</h2>
                    <div class="player-info">
                        <span class="episode-info" id="currentEpisodeTitle">Серия 1</span>
                        <span class="quality">HD 720p</span>
                        <span class="voice-badge" id="voiceBadge">
                            <i class="fas fa-microphone"></i> Re:Voice
                        </span>
                    </div>
                </div>
                
                <div id="playerPlaceholder" class="player-placeholder">
                    <div class="placeholder-content">
                        <i class="fas fa-play-circle"></i>
                        <p>Загрузка плеера...</p>
                        <div class="loading-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
                <iframe id="kodikPlayer" class="kodik-player" frameborder="0" allowfullscreen></iframe>
                
                <!-- Управление сериями -->
                <div class="episode-controls">
                    <div class="episode-nav">
                        <button id="prevEpisode" class="episode-nav-btn">
                            <i class="fas fa-chevron-left"></i> Предыдущая
                        </button>
                        <div class="current-episode">
                            <span>Текущая серия:</span>
                            <div class="episode-display">
                                <strong id="currentEpisodeNumber">1</strong>
                                <small id="currentEpisodeTotal">из <span id="totalEpisodesCount">?</span></small>
                            </div>
                        </div>
                        <button id="nextEpisode" class="episode-nav-btn">
                            Следующая <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    
                    <div class="episode-progress">
                        <div class="progress-info">
                            <span>Доступно серий:</span>
                            <span id="availableEpisodes">0</span>
                            <span>из</span>
                            <span id="totalEpisodes">?</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>
                    
                    <div class="episode-list">
                        <div class="episode-list-header">
                            <h4><i class="fas fa-list-ol"></i> Список серий</h4>
                            <span class="last-updated" id="lastUpdated">Последнее обновление: загрузка...</span>
                        </div>
                        <div id="episodeList" class="episode-grid">
                            <!-- Список серий будет загружен сюда -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Информация об аниме -->
            <div class="anime-info-section">
                <div class="anime-header">
                    <div class="anime-poster-container">
                        <img id="animePoster" class="anime-poster" src="" alt="Постер">
                        <div class="anime-status-badge" id="statusBadge">
                            <i class="fas fa-circle"></i> <span id="statusText">Загрузка...</span>
                        </div>
                    </div>
                    <div class="anime-title-section">
                        <h1 id="animeTitle">Загрузка...</h1>
                        <div class="anime-meta">
                            <span class="meta-item rating">
                                <i class="fas fa-star"></i> 
                                <span id="animeRating">0.0</span>
                            </span>
                            <span class="meta-item">
                                <i class="fas fa-calendar"></i> 
                                <span id="animeYear">2024</span>
                            </span>
                            <span class="meta-item">
                                <i class="fas fa-film"></i> 
                                <span id="animeType">TV Сериал</span>
                            </span>
                        </div>
                        
                        <div class="episode-stats">
                            <div class="stat">
                                <span class="stat-label">Всего серий:</span>
                                <span class="stat-value" id="totalEpisodesStat">?</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Добавлено:</span>
                                <span class="stat-value" id="addedEpisodes">0</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Озвучка:</span>
                                <span class="stat-value">Re:Voice</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="anime-details">
                    <div class="detail-section">
                        <h3><i class="fas fa-info-circle"></i> Описание</h3>
                        <p id="animeDescription">Загрузка описания...</p>
                    </div>
                    
                    <div class="detail-section">
                        <h3><i class="fas fa-tags"></i> Жанры</h3>
                        <div id="animeGenres" class="genres-list">
                            <!-- Жанры будут загружены сюда -->
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <h3><i class="fas fa-history"></i> История обновлений</h3>
                        <div id="updateHistory" class="update-history">
                            <p>Загрузка истории обновлений...</p>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn favorite-btn" id="favoriteBtn">
                            <i class="far fa-heart"></i> В избранное
                        </button>
                        <button class="action-btn share-btn" onclick="shareAnime()">
                            <i class="fas fa-share-alt"></i> Поделиться
                        </button>
                        <button class="action-btn report-btn" onclick="reportIssue()">
                            <i class="fas fa-flag"></i> Сообщить
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Похожие аниме -->
        <section class="similar-section">
            <div class="similar-header">
                <h3><i class="fas fa-thumbs-up"></i> Похожие аниме</h3>
                <div class="similar-filters">
                    <button class="similar-filter active" onclick="filterSimilar('same-genre')">По жанру</button>
                    <button class="similar-filter" onclick="filterSimilar('same-status')">По статусу</button>
                    <button class="similar-filter" onclick="filterSimilar('random')">Случайные</button>
                </div>
            </div>
            <div id="similarAnime" class="similar-grid">
                <!-- Похожие аниме будут загружены сюда -->
            </div>
        </section>
        
        <!-- Информация об обновлениях -->
        <section class="updates-section">
            <div class="updates-header">
                <h3><i class="fas fa-sync-alt"></i> Система обновлений</h3>
            </div>
            <div class="updates-info">
                <div class="update-card">
                    <i class="fas fa-cloud-download-alt"></i>
                    <h4>Автоматические обновления</h4>
                    <p>Новые серии автоматически появляются на сайте после добавления в anime_list.json</p>
                </div>
                <div class="update-card">
                    <i class="fas fa-clock"></i>
                    <h4>Частота обновлений</h4>
                    <p>Сайт проверяет обновления каждые 5 минут</p>
                </div>
                <div class="update-card">
                    <i class="fas fa-code-branch"></i>
                    <h4>Как добавить серию</h4>
                    <p>Добавьте объект серии в массив episodes_data в anime_list.json</p>
                </div>
            </div>
        </section>
    </main>

    <script src="script.js"></script>
</body>
</html>
